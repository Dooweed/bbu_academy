{% extends 'base.html' %}

{% load static %}
{% load front_tags %}
{% load i18n %}

{% block title %}
    <title>{% translate 'Заполнение данных' %}</title>
{% endblock %}

{% block links %}
    <link rel="stylesheet" href="{% static 'css/shining-button.css' %}">
{% endblock %}

{% block main %}

<section>
    <div class="w-100 pt-60 position-relative">
        <div class="fixed-bg" style="background-image: url({% static 'images/library.jpg' %});"></div>
        <div class="container">
            <div class="page-title-wrap text-center w-100 d-inline-block">
                <div class="page-title-inner d-inline-block">
                    <h2 class="mb-0 text-color7">{% translate 'Заполнение данных' %}</h2>
                </div>
            </div><!-- Page Title Wrap -->
        </div>
    </div>
</section>
<section>
    <div class="w-100 pt-40 pb-100 position-relative">
        <div class="container">
            <div class="about-wrap5 form-wrap w-100">
                <div class="row align-items-center">

                    <p class="warning-message text-center mt-3 mb-60 w-75 ml-auto mr-auto"><b>{% translate 'Внимание!' %}</b> {% translate 'Вводите данные корректно. Ошибка при вводе данных может привести к ошибкам в последующих документах Исполнителя, выдаваемых заказчику (сертификатах, счетах-фактурах и т.п.)' %}</p>


                    <ul class="nav nav-tabs w-100">
                        <li class="nav-item">
                            <a class="nav-link active">{% translate 'Физическое лицо' %}</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'purchase:entity-form' %}">{% translate 'Юридическое лицо' %}</a>
                        </li>
                    </ul>

                    <div class="form-tab-content">

                        <div class="tab-pane fade show active individual" id="individual">
                            <form class="form" enctype="multipart/form-data" method="POST">
                                {% csrf_token %}
                                <h2 class="text-center mt-2">{% translate 'Физическое лицо' %}</h2>

                                <div class="self_paying form-group d-flex justify-content-center mt-5">
                                    {{ self_payment.self_payment.label_tag }}
                                    {{ self_payment.self_payment }}
                                </div>

                                <div class="mt-4 row justify-content-center">
                                    <div id="payer" class="col-12 col-md-6 form-column payer">
                                        <div class="mt-5 d-flex justify-content-end"><span style="min-height: 24px" class="text-success mr-4">{% if payer_correct %}✓ {% translate 'Сохранено' %}{% endif %}</span></div>
                                        <h3 class="text-center mt-2 mb-3">{% translate 'Плательщик' %}</h3>
                                        {% for field in payer_fields  %}
                                            <div class="form-group">
                                                {{ field.label_tag }}
                                                <span class="warn">{% for error in field.errors %}{{ error }}{% endfor %}</span>
                                                <div class="field">{{ field }}</div>
                                                <small>{{ field.help_text }}</small>
                                            </div>
                                        {% endfor %}
                                    </div>

                                    <div id="student" class="col-12 col-md-6 form-column student">
                                        <div class="mt-5 d-flex justify-content-end"><span style="min-height: 24px" class="text-success mr-4">{% if student_correct %}✓ {% translate 'Сохранено' %}{% endif %}</span></div>
                                        <h3 class="text-center mt-2 mb-3">{% translate 'Студент' %}<span class="auto-fill-label"> ({% translate 'заполняется автоматически' %})</span></h3>
                                        {% for field in student_fields  %}
                                            <div class="form-group">
                                                {{ field.label_tag }}{% if field.name == "student_passport" %}<span class="auto-fill-label"> ({% translate 'используется паспорт плательщика' %})</span>{% endif %}
                                                <span class="warn">{% for error in field.errors %}{{ error }}{% endfor %}</span>
                                                <div class="field">{{ field }}</div>
                                                <small>{{ field.help_text }}</small>
                                            </div>
                                        {% endfor %}
                                    </div>

                                    <div id="rest" class="mt-5 col-12 col-md-6 justify-content-center form-column">
                                        <div class="form-group">
                                            {{ free_fields.study_type.label_tag }}
                                            <span class="warn">{% for error in free_fields.study_type.errors %}{{ error }}{% endfor %}</span>
                                            {{ free_fields.study_type }}
                                            {% if free_fields.study_type.help_text %}<small>{{ free_fields.study_type.help_text }}</small>{% endif %}
                                        </div>
                                        <div class="form-group">
                                            {{ free_fields.study_document.label_tag }}
                                            <span class="warn">{% for error in free_fields.study_document.errors %}{{ error }}{% endfor %}</span>
                                            {{ free_fields.study_document }}
                                            <small>{{ free_fields.study_document.help_text }}</small>
                                        </div>
                                    </div>

                                    <div class="submit-button col-12 d-flex justify-content-end">
                                        <button type="submit" class="sheen no-sheen">{% translate 'Отправить' %}</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>

                </div>
            </div><!-- About Wrap 5 -->
        </div>
    </div>
</section>

{% endblock %}

{% block script %}
    <script src="{% static 'js/custom/individual_form_script.js' %}"></script>
{% endblock %}