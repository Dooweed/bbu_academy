{% extends 'base.html' %}

{% load static %}
{% load front_tags %}
{% load i18n %}

{% block title %}
    <title>{% translate 'Заполнение данных' %}</title>
{% endblock %}

{% block links %}
    <link rel="stylesheet" href="{% static 'css/shining-button.css' %}">
{% endblock %}

{% block main %}

<section>
    <div class="w-100 pt-60 position-relative">
        <div class="fixed-bg" style="background-image: url({% static 'images/library.jpg' %});"></div>
        <div class="container">
            <div class="page-title-wrap text-center w-100 d-inline-block">
                <div class="page-title-inner d-inline-block">
                    <h2 class="mb-0 text-color7">{% translate 'Заполнение данных' %}</h2>
                </div>
            </div><!-- Page Title Wrap -->
        </div>
    </div>
</section>
<section>
    <div class="w-100 pt-40 pb-100 position-relative">
        <div class="container">
            <div class="about-wrap5 form-wrap w-100">
                <div class="row align-items-center">

                    <div id="data-load-url" data-load="{% url 'purchase:entity-ajax-load-data' %}"></div>

                    <p class="warn text-center mt-3 mb-60 w-75 ml-auto mr-auto"><b>{% translate 'Внимание!' %}</b> {% translate 'Вводите данные корректно. Ошибка при вводе данных может привести к ошибкам в последующих документах Исполнителя, выдаваемых заказчику (сертификатах, счетах-фактурах и т.п.)' %}</p>


                    <ul class="nav nav-tabs w-100">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'purchase:individual-form' %}">{% translate 'Физическое лицо' %}</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active">{% translate 'Юридическое лицо' %}</a>
                        </li>
                    </ul>

                    <div class="form-tab-content">

                        <div class="tab-pane fade show active entity" id="entity">
                            <div class="form">
                                <h2 class="text-center mt-2">{% translate 'Юридическое лицо' %}</h2>

                                <div class="mt-4 row justify-content-center">

                                    <form id="payer" enctype="multipart/form-data" method="POST" data-url="{% url "purchase:entity-ajax-payer" SUBMIT %}" class="col-12 col-md-6 form-column payer">

                                    </form>

                                    <form id="student" enctype="multipart/form-data" method="POST" data-url="{% url "purchase:entity-ajax-student" SUBMIT %}" class="col-12 col-md-6 d-flex flex-column justify-content-between form-column student">

                                    </form>

                                </div>
                            </div>

                            <form method="POST" class="agreement-buttons d-flex align-items-center justify-content-end pt-4 pr-2">
                                {% csrf_token %}
                                {% if payer_missing %}<span class="warn mr-3">{% translate 'Пожалуйста добавьте информацию о плательщике' %}</span>{% endif %}
                                {% if student_missing %}<span class="warn mr-3">{% translate 'Пожалуйста добавьте как минимум одного студента' %}</span>{% endif %}
                                <button class="button sheen no-sheen">{% translate "Продолжить" %}</button>
                            </form>
                        </div>

                        <div id="filled-students" class="filled-records pl-4 pr-4">
                            {% include 'purchase/chunks/student-display.html' %}
                        </div>

                    </div>

                </div>
            </div><!-- About Wrap 5 -->
        </div>
    </div>
</section>

{% endblock %}

{% block script %}
    <script src="{% static 'js/custom/ajax-form.js' %}"></script>
{% endblock %}